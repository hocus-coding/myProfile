let page=document.querySelector(".page"),footer=document.querySelector(".main-footer"),popup=document.querySelector(".form__container"),alertSuccess=document.querySelector(".popup--success"),alertFailed=document.querySelector(".popup--failed"),mp3Button=document.querySelector(".main-header__button"),mp3Audio=document.querySelector(".main-header__audio"),zSpacing=-1e3,lastPosition=zSpacing/5,$frames=document.getElementsByClassName("frame");frames=Array.from($frames),zVals=[],footer.classList.add("main-footer--hidden"),window.onscroll=function(){let e=document.documentElement.scrollTop,t=lastPosition-e;lastPosition=e,frames.forEach((function(e,o){zVals.push(o*zSpacing+zSpacing),zVals[o]+=-5*t;let n=frames[o],s=`translateZ(${zVals[o]}px)`,a=zVals[o]<Math.abs(zSpacing)/2?1:0;n.setAttribute("style",`transform: ${s}; opacity: ${a}`)}));let o=page.clientHeight,n=(page.scrollHeight,page.scrollHeight-e);[parseInt(n),parseInt(n)+1,parseInt(n)-1].includes(o)?(popup.classList.add("form__container--show"),footer.classList.remove("main-footer--hidden"),console.log(o+" клиент хеит"),console.log(n+" скрол топ")):(console.log(o+" клиент хеит"),console.log(n+" скрол топ"),popup.classList.remove("form__container--show"),footer.classList.add("main-footer--hidden"))},window.scrollTo(0,1),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.classList.add("field-item__input--error")}function o(e){e.classList.remove("field-item__input--error")}function n(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(s){s.preventDefault(),0===function(e){let s=0,a=document.querySelectorAll(".field-item__input--requed");for(let e=0;e<a.length;e++){const i=a[e];o(i),i.classList.contains("field-item__input--email")?n(i)&&(t(i),s++):""===i.value&&(t(i),s++)}return s}()?(alertSuccess.classList.add("popup--success-show"),setTimeout((()=>{alertSuccess.classList.remove("popup--success-show")}),6e3),e.classList.add("feedback--sending"),Email.send({SecureToken:"ab62c18f-42ed-4ba0-b73c-922452d4f357",To:"lysogordmitry@gmail.com",From:"hoqus.coding@gmail.com",Subject:"Вам Важное Письмо",Body:"Subject: "+document.getElementById("subject").value+"<br> Name: "+document.getElementById("name").value+"<br> Email: "+document.getElementById("email").value+"<br> Message: "+document.getElementById("message").value}).then(e.reset(),e.classList.remove("feedback--sending"))):(alertFailed.classList.add("popup--failed-show"),setTimeout((()=>{alertFailed.classList.remove("popup--failed-show")}),6e3),e.classList.remove("feedback--sending"))}))})),mp3Button.addEventListener("click",(e=>{mp3Button.classList.toggle("main-header__button--pause"),mp3Audio.paused?mp3Audio.play():mp3Audio.pause()})),window.onfocus=function(){mp3Button.classList.contains("main-header__button--pause")?mp3Audio.pause():mp3Audio.play()},window.onblur=function(){mp3Audio.pause()};var Email={send:function(e){return new Promise((function(t,o){e.nocache=Math.floor(1e6*Math.random()+1),e.Action="Send";var n=JSON.stringify(e);Email.ajaxPost("https://smtpjs.com/v3/smtpjs.aspx?",n,(function(e){t(e)}))}))},ajaxPost:function(e,t,o){var n=Email.createCORSRequest("POST",e);n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onload=function(){var e=n.responseText;null!=o&&o(e)},n.send(t)},ajax:function(e,t){var o=Email.createCORSRequest("GET",e);o.onload=function(){var e=o.responseText;null!=t&&t(e)},o.send()},createCORSRequest:function(e,t){var o=new XMLHttpRequest;return"withCredentials"in o?o.open(e,t,!0):"undefined"!=typeof XDomainRequest?(o=new XDomainRequest).open(e,t):o=null,o}};