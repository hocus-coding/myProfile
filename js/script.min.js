let page=document.querySelector(".page"),popup=document.querySelector(".form__container"),zSpacing=-1e3,lastPosition=zSpacing/5,$frames=document.getElementsByClassName("frame");frames=Array.from($frames),zVals=[],window.onscroll=function(){let e=document.documentElement.scrollTop,t=lastPosition-e;lastPosition=e,frames.forEach((function(e,n){zVals.push(n*zSpacing+zSpacing),zVals[n]+=-5*t;let s=frames[n],a=`translateZ(${zVals[n]}px)`,o=zVals[n]<Math.abs(zSpacing)/2?1:0;s.setAttribute("style",`transform: ${a}; opacity: ${o}`)}));let n=page.clientHeight,s=(page.scrollHeight,page.scrollHeight-e);[parseInt(s),parseInt(s)+1,parseInt(s)-1].includes(n)?(popup.classList.add("form__container--show"),console.log("конец скрола")):(popup.classList.remove("form__container--show"),console.log("скрол не кончился"))},window.scrollTo(0,1),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.classList.add("field-item__input--error")}function n(e){e.classList.remove("field-item__input--error")}function s(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(a){a.preventDefault();let o=function(e){let a=0,o=document.querySelectorAll(".field-item__input--requed");for(let e=0;e<o.length;e++){const l=o[e];n(l),l.classList.contains("field-item__input--email")?s(l)&&(t(l),a++):""===l.value&&(t(l),a++)}return a}(),l=new FormData(e);if(0===o){e.classList.add("feedback--sending");let t=await fetch("sendmail.php",{method:"POST",body:l});if(t.ok){let n=await t.json();alert(n.message),e.reset(),e.classList.remove("feedback--sending")}else alert("ошибка отправки"),e.classList.remove("feedback--sending")}else alert("Заполните обязательные поля")}))}));